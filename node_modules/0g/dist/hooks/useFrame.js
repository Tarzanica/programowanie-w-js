"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useQueryFrame = exports.useFrame = void 0;
var react_1 = require("react");
var useGame_1 = require("./useGame");
/**
 * Runs a callback every game step
 */
function useFrame(callback) {
    var game = useGame_1.useGame();
    var ref = react_1.useRef(callback);
    react_1.useLayoutEffect(function () {
        ref.current = callback;
    }, [callback]);
    react_1.useEffect(function () {
        function run() {
            ref.current();
        }
        game.on('step', run);
        return function () {
            game.off('step', run);
        };
    }, [game, ref]);
}
exports.useFrame = useFrame;
/**
 * Iterates over a query result entity list every
 * game step
 */
function useQueryFrame(input, callback) {
    useFrame(function () {
        input.entities.forEach(callback);
    });
}
exports.useQueryFrame = useQueryFrame;
//# sourceMappingURL=useFrame.js.map