"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StoreManager = void 0;
var objectPool_1 = require("./internal/objectPool");
var StoreManager = /** @class */ (function () {
    function StoreManager() {
        this.poolMap = new Map();
    }
    StoreManager.prototype.acquire = function (StoreSpec) {
        var pool = this.poolMap.get(StoreSpec);
        if (!pool) {
            pool = new objectPool_1.ObjectPool(function () { return new StoreSpec(); });
            this.poolMap.set(StoreSpec, pool);
        }
        return pool.acquire();
    };
    StoreManager.prototype.release = function (store) {
        var Spec = Object.getPrototypeOf(store).constructor;
        var pool = this.poolMap.get(Spec);
        if (!pool) {
            throw new Error("Failed to release store, unknown kind " + Spec.name);
        }
        pool.release(store);
    };
    return StoreManager;
}());
exports.StoreManager = StoreManager;
//# sourceMappingURL=storeManager.js.map